# Phase 1 — Tasks 1–3: Environment & Project Setup

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Get from zero to a running Vite dev server with all dependencies, config, and project structure in place.

**Prereqs:** WSL2 Ubuntu 24.04, git installed, working directory `/mnt/c/Users/Caus/Golf_Plan`

---

### Task 1: Install fnm + Node 22 in WSL2

**Step 1: Install fnm**

Run:
```bash
curl -fsSL https://fnm.vercel.app/install | bash
```
Expected: fnm binary installed, shell config updated.

**Step 2: Activate fnm and install Node 22**

Run:
```bash
source ~/.bashrc && fnm install 22 && fnm default 22
```
Expected: Node 22.x installed.

**Step 3: Verify**

Run:
```bash
node --version && npm --version
```
Expected: `v22.x.x` and `10.x.x` (or similar).

---

### Task 2: Scaffold Vite Project + Install Dependencies

**Step 1: Create project**

Run:
```bash
cd /mnt/c/Users/Caus/Golf_Plan && npm create vite@latest golf-planner -- --template react-ts
```
Expected: `golf-planner/` directory created with Vite React-TS template.

**Step 2: Install base dependencies**

Run:
```bash
cd /mnt/c/Users/Caus/Golf_Plan/golf-planner && npm install
```
Expected: `node_modules/` populated, no errors.

**Step 3: Install 3D dependencies**

Run:
```bash
cd /mnt/c/Users/Caus/Golf_Plan/golf-planner && npm install three @react-three/fiber @react-three/drei && npm install -D @types/three
```

**Step 4: Install state + styling + tooling**

Run:
```bash
cd /mnt/c/Users/Caus/Golf_Plan/golf-planner && npm install zustand && npm install -D tailwindcss @tailwindcss/vite @biomejs/biome vitest
```

**Step 5: Initialize Biome**

Run:
```bash
cd /mnt/c/Users/Caus/Golf_Plan/golf-planner && npx @biomejs/biome init
```
Expected: `biome.json` created.

**Step 6: Verify dev server starts**

Run:
```bash
cd /mnt/c/Users/Caus/Golf_Plan/golf-planner && npm run dev -- --host
```
Expected: Vite dev server starts on `http://localhost:5173`. Kill with Ctrl+C after verifying.

---

### Task 3: Configure Project Files, CLAUDE.md, Reference Docs, Skill

**Files:**
- Modify: `golf-planner/vite.config.ts`
- Modify: `golf-planner/package.json` (scripts)
- Modify: `golf-planner/tsconfig.json` (if needed for strict)
- Modify: `golf-planner/src/index.css` (tailwind import)
- Create: `golf-planner/CLAUDE.md`
- Create: `golf-planner/.claude/skills/devils-advocate.md`
- Create: `golf-planner/docs/plans/` (copy design docs)
- Create: `golf-planner/docs/reference/offer.md`
- Create: `golf-planner/docs/reference/feasibility.md`
- Create: `golf-planner/src/components/three/.gitkeep`
- Create: `golf-planner/src/components/ui/.gitkeep`
- Create: `golf-planner/src/store/.gitkeep`
- Create: `golf-planner/src/constants/.gitkeep`
- Create: `golf-planner/src/types/.gitkeep`
- Create: `golf-planner/src/utils/.gitkeep`
- Create: `golf-planner/tests/utils/.gitkeep`

**Step 1: Configure vite.config.ts**

Replace `golf-planner/vite.config.ts` with:

```typescript
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import tailwindcss from "@tailwindcss/vite";

export default defineConfig({
  plugins: [react(), tailwindcss()],
  server: {
    watch: {
      usePolling: true,
      interval: 100,
    },
  },
});
```

**Step 2: Update package.json scripts**

Replace the `"scripts"` section in `golf-planner/package.json` with:

```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "preview": "vite preview",
    "check": "biome check .",
    "format": "biome format --write .",
    "test": "vitest"
  }
}
```

**Step 3: Set up Tailwind in index.css**

Replace `golf-planner/src/index.css` with:

```css
@import "tailwindcss";
```

**Step 4: Clean up Vite template**

- Delete `golf-planner/src/App.css`
- Replace `golf-planner/src/App.tsx` with a minimal placeholder:

```tsx
export default function App() {
  return <div className="h-screen w-screen bg-gray-100">Golf Planner</div>;
}
```

- Replace `golf-planner/src/main.tsx` with:

```tsx
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import App from "./App";
import "./index.css";

createRoot(document.getElementById("root")!).render(
  <StrictMode>
    <App />
  </StrictMode>,
);
```

- Delete `golf-planner/src/assets/react.svg` and `golf-planner/public/vite.svg` if present.

**Step 5: Create CLAUDE.md**

Create `golf-planner/CLAUDE.md` with the content from `docs/plans/07-project-config.md` (the CLAUDE.md section).

**Step 6: Copy reference documents**

```bash
mkdir -p golf-planner/docs/reference
cp /mnt/c/Users/Caus/Golf_Plan/offer.md golf-planner/docs/reference/offer.md
cp /mnt/c/Users/Caus/Golf_Plan/compass_artifact_wf-434409c1-5ba6-4635-8f46-39f9b630c12c_text_markdown.md golf-planner/docs/reference/feasibility.md
```

**Step 7: Copy design docs**

```bash
cp -r /mnt/c/Users/Caus/Golf_Plan/docs/plans/ golf-planner/docs/plans/
```

**Step 8: Install Devil's Advocate skill**

```bash
mkdir -p golf-planner/.claude/skills
cp /mnt/c/Users/Caus/Golf_Plan/MY_SKILL.md golf-planner/.claude/skills/devils-advocate.md
```

Verify the skill frontmatter is correct. The file must start with:
```
---
name: devils-advocate
description: ...
---
```

Claude Code discovers skills from `.claude/skills/` in the project directory. Verify by checking that the skill appears in the available skills list when opening Claude Code in the `golf-planner/` directory.

**Step 9: Create directory structure**

```bash
mkdir -p golf-planner/src/components/three
mkdir -p golf-planner/src/components/ui
mkdir -p golf-planner/src/store
mkdir -p golf-planner/src/constants
mkdir -p golf-planner/src/types
mkdir -p golf-planner/src/utils
mkdir -p golf-planner/tests/utils
```

Add `.gitkeep` files to empty directories so git tracks them.

**Step 10: Initialize git and commit**

```bash
cd golf-planner
git init
git add .
git commit -m "feat: scaffold project with Vite, React, R3F, Zustand, Tailwind, Biome"
```

**Step 11: Verify everything works**

Run:
```bash
cd golf-planner && npm run dev -- --host
```
Expected: Dev server starts, browser shows "Golf Planner" on gray background.

Run:
```bash
cd golf-planner && npm run check
```
Expected: Biome reports no errors (or only template-generated issues to fix).

Run:
```bash
cd golf-planner && npm run build
```
Expected: Build succeeds.
